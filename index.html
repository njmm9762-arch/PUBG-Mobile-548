<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>TIK NEGM</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:#000;
  color:#fff;
  font-family:Arial,sans-serif;
  overflow:hidden
}

/* ---------- LOGIN ---------- */
#login{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:9999
}
#login input{
  width:260px;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:none;
  outline:none;
}
#login button{
  margin-top:10px;
  padding:12px 40px;
  border-radius:30px;
  border:none;
  background:#ff0050;
  color:#fff;
  font-size:18px;
  cursor:pointer
}

/* ---------- APP ---------- */
#app{display:none;height:100%}
video{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000
}

/* ---------- UI ---------- */
.top-bar{
  position:absolute;
  top:10px;
  left:10px;
  font-size:26px;
  font-weight:900;
  z-index:10;
  color:#00f2ea
}
.top-bar span{color:#ff0050}

.side{
  position:absolute;
  right:10px;
  bottom:120px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
  z-index:10
}
.side img{
  width:48px;
  height:48px;
  border-radius:50%;
  border:2px solid #fff;
  cursor:pointer
}
.action{
  font-size:26px;
  text-align:center;
  cursor:pointer
}
.action small{font-size:13px;display:block}

.bottom{
  position:absolute;
  left:10px;
  bottom:20px;
  z-index:10
}
.bottom .user{font-size:22px;font-weight:900}
.bottom .desc{opacity:.9}

/* ---------- PROFILE ---------- */
#profile{
  position:fixed;
  inset:0;
  background:#000;
  display:none;
  overflow-y:auto
}
.profile-head{
  text-align:center;
  padding:20px 10px;
  position:relative
}
.profile-head img{
  width:90px;
  height:90px;
  border-radius:50%
}
.profile-head .stats{
  display:flex;
  justify-content:center;
  gap:25px;
  margin-top:8px;
  opacity:.85
}
#closeProfile{
  position:absolute;
  right:15px;
  top:10px;
  font-size:28px;
  cursor:pointer
}
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:2px;
  padding:2px
}
.grid video{
  width:100%;
  height:160px;
  object-fit:cover
}
.view{
  position:absolute;
  bottom:5px;
  left:5px;
  font-size:12px;
  font-weight:700
}

/* ---------- NOTIFICATION ---------- */
#notif{
  position:fixed;
  top:15px;
  right:50%;
  transform:translateX(50%);
  background:#111;
  padding:12px 18px;
  border-radius:20px;
  font-size:14px;
  display:none;
  z-index:9999
}

/* ---------- UPLOAD ---------- */
#uploadBtn{
  position:absolute;
  bottom:80px;
  left:10px;
  background:#ff0050;
  border:none;
  color:#fff;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer
}

</style>
</head>
<body>

<!-- LOGIN -->
<div id="login">
  <input id="phone" placeholder="ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ">
  <input id="pass" type="password" placeholder="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
  <button id="loginBtn">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</button>
</div>

<!-- NOTIF -->
<div id="notif"></div>

<!-- APP -->
<div id="app">
  <div class="top-bar">TIK <span>NEGM</span></div>

  <video id="player" playsinline></video>

  <div class="side">
    <img id="avatar">
    <div class="action" id="like">ü§ç<small id="likeN"></small></div>
    <div class="action">üí¨</div>
    <div class="action">‚û•<small id="shareN"></small></div>
  </div>

  <button id="uploadBtn">+ ÿ±ŸÅÿπ ŸÅŸäÿØŸäŸà</button>

  <div class="bottom">
    <div class="user">‚òÖ TIK NEGM ‚òÖ</div>
    <div class="desc" id="desc"></div>
  </div>
</div>

<!-- PROFILE -->
<div id="profile">
  <div class="profile-head">
    <span id="closeProfile">√ó</span>
    <img id="pAvatar">
    <h2>TIK NEGM</h2>
    <div class="stats">
      <span>2B ŸÖÿ™ÿßÿ®ÿπ</span>
      <span>12M ŸÖÿ¥ÿßÿ±ŸÉÿ©</span>
    </div>
  </div>
  <div class="grid" id="grid"></div>
</div>

<input type="file" id="uploader" accept="video/*" hidden>

<script>
/* ---------- HELPERS ---------- */
const f=n=>n>=1e9?(n/1e9).toFixed(1)+"B":n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n;

/* ---------- LOGIN ---------- */
if(localStorage.user) login.remove();
loginBtn.onclick=()=>{
  if(phone.value && pass.value){
    localStorage.user=phone.value;
    login.remove();
    app.style.display="block";
    start();
  }
};

/* ---------- DATA ---------- */
let videos=[],i=0,liked=false;
const player=document.getElementById("player");

/* ---------- LOAD ---------- */
function start(){
 fetch("data.json").then(r=>r.json()).then(d=>{
  videos=d.slice(0,39).map(v=>({
    ...v,
    likes:Math.floor(Math.random()*50e6),
    shares:Math.floor(Math.random()*5e6),
    views:Math.floor(Math.random()*2e9)
  }));
  load();
  fakeNotif();
 });
}

/* ---------- PLAYER ---------- */
function load(){
 const v=videos[i];
 player.src=v.src;
 player.muted=false;
 player.play().catch(()=>{});
 avatar.src=v.profile;
 pAvatar.src=v.profile;
 desc.textContent=v.desc;
 likeN.textContent=f(v.likes);
 shareN.textContent=f(v.shares);
 liked=false;
}

/* ---------- SCROLL ---------- */
let sy=0;
document.addEventListener("touchstart",e=>sy=e.touches[0].clientY);
document.addEventListener("touchend",e=>{
 let ey=e.changedTouches[0].clientY;
 if(sy-ey>50){i=(i+1)%videos.length;load()}
 if(ey-sy>50){i=(i-1+videos.length)%videos.length;load()}
});

/* ---------- LIKE ---------- */
like.onclick=()=>{
 liked=!liked;
 like.innerHTML=(liked?"‚ù§Ô∏è":"ü§ç")+"<small>"+f(videos[i].likes)+"</small>";
};

/* ---------- PAUSE ---------- */
player.onclick=()=>player.paused?player.play():player.pause();

/* ---------- PROFILE ---------- */
avatar.onclick=()=>{
 app.style.display="none";
 profile.style.display="block";
 grid.innerHTML="";
 videos.forEach((v,idx)=>{
  let w=document.createElement("div");
  w.style.position="relative";
  let vd=document.createElement("video");
  vd.src=v.src;
  vd.muted=true;
  vd.onclick=()=>{
    profile.style.display="none";
    app.style.display="block";
    i=idx;load();
  };
  let vi=document.createElement("div");
  vi.className="view";
  vi.textContent="üëÅ "+f(v.views);
  w.append(vd,vi);
  grid.appendChild(w);
 });
};
closeProfile.onclick=()=>{
 profile.style.display="none";
 app.style.display="block";
};

/* ---------- UPLOAD ---------- */
uploadBtn.onclick=()=>uploader.click();
uploader.onchange=e=>{
 let file=e.target.files[0];
 if(!file)return;
 let url=URL.createObjectURL(file);
 videos.unshift({
  src:url,
  desc:"ŸÅŸäÿØŸäŸà ÿ¨ÿØŸäÿØ",
  profile:avatar.src,
  likes:Math.floor(Math.random()*5e6),
  shares:Math.floor(Math.random()*500e3),
  views:0
 });
 i=0;load();
};

/* ---------- FAKE NOTIF ---------- */
function fakeNotif(){
 setInterval(()=>{
  notif.textContent=`üî• ÿßŸÜÿ∂ŸÖ ${Math.floor(Math.random()*2e6)} ŸÖÿ™ÿßÿ®ÿπ ÿ¨ÿØŸäÿØ`;
  notif.style.display="block";
  setTimeout(()=>notif.style.display="none",2500);
 },12000);
}
</script>
</body>
</html>
