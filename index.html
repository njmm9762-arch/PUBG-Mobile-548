<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>TIK NEGM</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:sans-serif}
body{background:#000;color:#fff;overflow-x:hidden}
header{padding:12px 16px;font-size:22px;font-weight:bold}
header span:nth-child(1){color:#25F4EE}
header span:nth-child(2){color:#FE2C55}

#feed{height:100vh;overflow-y:auto;scroll-snap-type:y mandatory}
.video-card{position:relative;height:100vh;scroll-snap-align:start}
video{width:100%;height:100%;object-fit:cover;background:#000}

.loading{
position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
background:#000;color:#aaa;font-size:18px
}

.overlay{
position:absolute;bottom:90px;left:12px;right:80px
}
.brand{font-weight:bold;margin-bottom:6px}

.actions{
position:absolute;right:10px;bottom:120px;display:flex;flex-direction:column;gap:16px;align-items:center
}
.actions div{cursor:pointer;text-align:center;font-size:22px}
.actions span{font-size:13px;display:block;margin-top:4px}

.profile-btn img{
width:48px;height:48px;border-radius:50%;border:2px solid #fff
}

.bottom-actions{
position:absolute;bottom:20px;left:50%;transform:translateX(-50%);
display:flex;gap:28px;font-size:16px
}
.bottom-actions button{
background:none;border:none;color:#fff;cursor:pointer;font-size:16px
}

/* Upload */
#uploadBtn{
position:fixed;bottom:10px;right:10px;
background:#fff;color:#000;border-radius:18px;
width:56px;height:56px;font-size:30px;border:none;cursor:pointer
}

/* Profile */
#profile{
position:fixed;inset:0;background:#000;z-index:9;display:none;flex-direction:column
}
.profile-header{
display:flex;align-items:center;justify-content:space-between;padding:10px
}
.profile-header img{width:70px;height:70px;border-radius:50%}
.profile-stats{
display:flex;justify-content:space-around;margin:10px 0
}
.profile-stats div{text-align:center}
.profile-grid{
display:grid;grid-template-columns:repeat(3,1fr);gap:2px;overflow-y:auto;flex:1
}
.profile-grid video{height:160px;object-fit:cover}
.eye{
position:absolute;bottom:6px;right:6px;font-size:12px;background:rgba(0,0,0,.6);padding:2px 6px;border-radius:10px
}
</style>
</head>

<body>

<header><span>TIK</span> <span>NEGM</span></header>

<div id="feed"></div>

<button id="uploadBtn">+</button>
<input type="file" id="uploader" accept="video/*" hidden>

<!-- PROFILE -->
<div id="profile">
  <div class="profile-header">
    <button onclick="closeProfile()">âœ–</button>
    <strong>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</strong>
    <button onclick="shareSite()">ğŸ”—</button>
  </div>

  <div style="text-align:center">
    <img src="914512268067030319.jpeg">
    <div style="margin-top:6px;font-weight:bold">TIKNEGM</div>
  </div>

  <div class="profile-stats">
    <div><b>2B</b><br>Ù…ØªØ§Ø¨Ø¹ÙˆÙ†</div>
    <div><b>12M</b><br>Ù…Ø´Ø§Ø±ÙƒØ§Øª</div>
    <div><b>7K</b><br>Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª</div>
  </div>

  <div class="profile-grid" id="profileGrid"></div>
</div>

<script>
const SITE_URL = location.origin + location.pathname;
let videosData=[];

fetch('data.json')
.then(r=>r.json())
.then(d=>{
  videosData=d.videos;
  renderFeed();
  renderProfile();
});

function renderFeed(){
  const feed=document.getElementById('feed');
  feed.innerHTML='';
  videosData.forEach(v=>{
    const card=document.createElement('div');
    card.className='video-card';

    card.innerHTML=`
      <div class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      <video src="${v.src}" preload="metadata"></video>

      <div class="overlay">
        <div class="brand">â˜… TIK NEGM â˜…</div>
        <div>${v.desc||''}</div>
      </div>

      <div class="actions">
        <div onclick="toggleLike(this)">ğŸ¤<span>${rand()}</span></div>
        <div class="profile-btn" onclick="openProfile()">
          <img src="914512268067030319.jpeg">
        </div>
        <div>ğŸ’¬<span>${rand()}</span></div>
      </div>

      <div class="bottom-actions">
        <button onclick="downloadVideo('${v.src}')">â†“ ØªÙ†Ø²ÙŠÙ„</button>
        <button onclick="copyLink()">ğŸ”— Ù†Ø³Ø®</button>
        <button onclick="shareSite()">ğŸ’Œ Ù…Ø´Ø§Ø±ÙƒØ©</button>
      </div>
    `;
    const video=card.querySelector('video');
    const loading=card.querySelector('.loading');

    video.oncanplay=()=>loading.style.display='none';
    video.onclick=()=> video.paused ? video.play() : video.pause();

    feed.appendChild(card);
  });
}

function renderProfile(){
  const grid=document.getElementById('profileGrid');
  grid.innerHTML='';
  videosData.slice(0,39).forEach(v=>{
    const wrap=document.createElement('div');
    wrap.style.position='relative';
    wrap.innerHTML=`
      <video src="${v.src}" muted></video>
      <div class="eye">ğŸ‘ ${rand()}B</div>
    `;
    wrap.onclick=()=>{
      closeProfile();
      document.querySelectorAll('video').forEach(vid=>vid.pause());
      const main=document.querySelector(`video[src="${v.src}"]`);
      if(main) main.play();
    };
    grid.appendChild(wrap);
  });
}

function toggleLike(el){
  if(el.innerHTML.includes('ğŸ¤')){
    el.innerHTML=el.innerHTML.replace('ğŸ¤','â¤ï¸');
  }else{
    el.innerHTML=el.innerHTML.replace('â¤ï¸','ğŸ¤');
  }
}

function rand(){return Math.floor(Math.random()*900+100)}

function downloadVideo(src){
  const a=document.createElement('a');
  a.href=src;
  a.download='tiknegm.mp4';
  a.click();
}

function copyLink(){
  navigator.clipboard.writeText(SITE_URL);
}

function shareSite(){
  if(navigator.share){
    navigator.share({title:'TIK NEGM',url:SITE_URL});
  }else{
    copyLink();
    alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·');
  }
}

function openProfile(){
  document.querySelectorAll('#feed video').forEach(v=>v.pause());
  document.getElementById('profile').style.display='flex';
}
function closeProfile(){
  document.getElementById('profile').style.display='none';
}

uploadBtn.onclick=()=>uploader.click();
uploader.onchange=e=>{
  const file=e.target.files[0];
  if(!file)return;
  const url=URL.createObjectURL(file);
  videosData.unshift({src:url,desc:'ÙÙŠØ¯ÙŠÙˆ Ø¬Ø¯ÙŠØ¯'});
  renderFeed();
  renderProfile();
};
</script>

</body>
</html>
