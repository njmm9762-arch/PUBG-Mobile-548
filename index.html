<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tik NEGM</title>
<style>
body,html{margin:0;padding:0;height:100%;overflow:hidden;background:#000;color:#fff;font-family:Arial,sans-serif;}
#startScreen{position:fixed;inset:0;background:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000;}
#startScreen img{width:120px;margin-bottom:30px;}
#startBtn{padding:15px 40px;font-size:18px;border:none;border-radius:30px;background:#ff0050;color:#fff;cursor:pointer;}
#app{position:relative;width:100%;height:100vh;overflow:hidden;display:none;}
video{width:100%;height:100%;object-fit:contain;display:block;}
.top-bar{position:absolute;top:10px;left:10px;z-index:1000;font-size:26px;font-weight:bold;color:#00f2ea;}
.top-bar span{color:#ff0050;}
.side-actions{position:absolute;right:10px;bottom:120px;display:flex;flex-direction:column;gap:20px;align-items:center;}
.side-actions img{width:45px;height:45px;border-radius:50%;border:2px solid #fff;cursor:pointer;}
.side-actions .action{font-size:26px;text-align:center;cursor:pointer;display:flex;flex-direction:column;align-items:center;}
.side-actions .action small{font-size:14px;margin-top:5px;}
.bottom-info{position:absolute;bottom:20px;left:10px;}
.bottom-info .username{font-size:26px;font-weight:900;}
.bottom-info .desc{font-size:16px;opacity:0.9;}
.share-options{position:absolute;bottom:60px;right:10px;background:rgba(0,0,0,0.7);border-radius:10px;padding:10px;display:none;flex-direction:row;gap:5px;z-index:1000;}
.share-options button{background:#ff0050;border:none;color:#fff;padding:5px 10px;border-radius:6px;font-size:14px;cursor:pointer;}
#profile{display:none;background:#000;min-height:100vh;padding-top:70px;overflow-y:auto;}
.profile-header{text-align:center;position:relative;padding:10px;}
.profile-header img{width:90px;height:90px;border-radius:50%;}
.profile-header h2{margin:10px 0 5px;}
.profile-header #closeProfile{position:absolute;top:10px;right:10px;font-size:28px;cursor:pointer;}
.profile-videos{display:grid;grid-template-columns:repeat(3,1fr);gap:5px;padding:10px;}
.profile-videos video{width:100%;height:150px;object-fit:cover;cursor:pointer;border-radius:8px;}
#heart{position:absolute;font-size:80px;color:red;opacity:0;transform:translate(-50%,-50%);pointer-events:none;transition:opacity 0.4s;}
#addVideoBtn{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:#ff0050;color:#fff;padding:10px 20px;border:none;border-radius:8px;font-size:18px;cursor:pointer;z-index:1000;}
</style>
</head>
<body>

<div id="startScreen">
  <img src="file_00000000658c722fa7584f1933ac55ff.png">
  <button id="startBtn">Ø§Ø¶ØºØ· Ù„Ù„Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="app">
  <div class="top-bar">TIK <span>NEGM</span></div>
  <video id="videoPlayer" autoplay playsinline muted></video>
  <div id="heart">â¤ï¸</div>

  <div class="side-actions">
    <img id="profilePic" src="">
    <div class="action" id="likeBtn">ğŸ¤<br><small id="likeCount">0</small></div>
    <div class="action" id="commentBtn">ğŸ’¬</div>
    <div class="action" id="shareBtn">â¥<small id="shareCount">0</small></div>
  </div>

  <div class="share-options" id="shareOptions">
    <button id="downloadBtn">â†“ ØªÙ†Ø²ÙŠÙ„</button>
    <button id="copyBtn">ğŸ”— Ù†Ø³Ø®</button>
    <button id="shareAppBtn">ğŸ’Œ Ù…Ø´Ø§Ø±ÙƒØ©</button>
  </div>

  <div class="bottom-info">
    <div class="username" id="username">â˜… TIK NEGM â˜…</div>
    <div class="desc" id="videoDesc">ÙÙŠØ¯ÙŠÙˆ Ø¬Ù…ÙŠÙ„</div>
  </div>
</div>

<div id="profile">
  <div class="profile-header">
    <span id="closeProfile">Ã—</span>
    <img id="profileHeaderPic" src="">
    <h2 id="profileName">TIK NEGM</h2>
  </div>
  <div class="profile-videos" id="profileVideos"></div>
</div>

<button id="addVideoBtn">â• Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ</button>

<script>
let videos = [];
let index = 0;
let likedVideos = {}; // Ù„ØªØ®Ø²ÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø§ÙŠÙƒ Ù„ÙƒÙ„ ÙÙŠØ¯ÙŠÙˆ

const videoPlayer = document.getElementById("videoPlayer");
const likeBtn = document.getElementById("likeBtn");
const likeCount = document.getElementById("likeCount");
const shareCount = document.getElementById("shareCount");
const videoDesc = document.getElementById("videoDesc");
const heart = document.getElementById("heart");
const app = document.getElementById("app");
const startScreen = document.getElementById("startScreen");
const profilePic = document.getElementById("profilePic");
const shareBtn = document.getElementById("shareBtn");
const shareOptions = document.getElementById("shareOptions");
const downloadBtn = document.getElementById("downloadBtn");
const copyBtn = document.getElementById("copyBtn");
const shareAppBtn = document.getElementById("shareAppBtn");
const profileContainer = document.getElementById("profile");
const profileVideosContainer = document.getElementById("profileVideos");
const profileHeaderPic = document.getElementById("profileHeaderPic");
const closeProfileBtn = document.getElementById("closeProfile");
const addVideoBtn = document.getElementById("addVideoBtn");

// ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ù„Ø§Ø®ØªØµØ§Ø±
function formatNumber(num){
  if(num >= 1e9) return (num/1e9).toFixed(1).replace(/\.0$/,'') + "B";
  if(num >= 1e6) return (num/1e6).toFixed(1).replace(/\.0$/,'') + "M";
  if(num >= 1e3) return (num/1e3).toFixed(1).replace(/\.0$/,'K');
  return num;
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹
startScreen.style.display = "none";
app.style.display = "block";
videoPlayer.muted = false;

fetch('data.json')
.then(res=>res.json())
.then(data=>{
  videos = data;
  videos.forEach((v,i)=>{
    v.likes = Math.floor(Math.random()*20e6);
    v.shares = Math.floor(Math.random()*1e6);
    v.views = Math.floor(Math.random()*2e9);
    if(localStorage.getItem("liked_"+i) === "true") likedVideos[i] = true;
  });
  loadVideo();
})
.catch(()=>alert("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!"));

function loadVideo(){
  if(videos.length===0) return;
  const v = videos[index];
  videoPlayer.src = v.src;
  profilePic.src = v.profile || "914512268067030319.jpeg";
  profileHeaderPic.src = v.profile || "914512268067030319.jpeg";
  videoDesc.innerText = v.desc;
  likeCount.innerHTML = (likedVideos[index]?"â¤ï¸":"ğŸ¤") + "<br><small>" + formatNumber(v.likes) + "</small>";
  shareCount.innerText = formatNumber(v.shares);
  videoPlayer.play().catch(()=>{});
}

// Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¹ÙŠØ¯ Ù†ÙØ³Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
videoPlayer.addEventListener("ended", ()=>{loadVideo(); nextVideo();});

// Ø§Ù„ØªÙˆÙ‚Ù Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©
videoPlayer.addEventListener("click", ()=>{if(videoPlayer.paused) videoPlayer.play(); else videoPlayer.pause();});

// Scroll Ø³Ù„Ø³ Ù„Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
let startY = 0;
document.addEventListener("touchstart", e=>startY=e.touches[0].clientY);
document.addEventListener("touchend", e=>{
  let endY=e.changedTouches[0].clientY;
  if(profileContainer.style.display==="block") return;
  if(startY-endY>50) nextVideo();
  if(endY-startY>50) prevVideo();
});

function nextVideo(){ index=(index+1)%videos.length; loadVideo(); }
function prevVideo(){ index=(index-1+videos.length)%videos.length; loadVideo(); }

// Ø¯Ø¨Ù„ ØªØ§Ø¨ + Ù‚Ù„Ø¨ Ù…ØªØ­Ø±Ùƒ
videoPlayer.addEventListener("dblclick", e=>{
  likedVideos[index]=true;
  localStorage.setItem("liked_"+index,"true");
  likeBtn.innerHTML="â¤ï¸<br><small>"+formatNumber(videos[index].likes)+"</small>";
  heart.style.left=e.clientX+"px";
  heart.style.top=e.clientY+"px";
  heart.style.opacity=1;
  heart.style.transform="translate(-50%,-50%) scale(1.5)";
  setTimeout(()=>{heart.style.opacity=0; heart.style.transform="translate(-50%,-50%) scale(1)";},400);
});

// Ø§Ù„Ù„Ø§ÙŠÙƒ toggle
likeBtn.addEventListener("click", ()=>{
  likedVideos[index] = !likedVideos[index];
  localStorage.setItem("liked_"+index, likedVideos[index]);
  likeBtn.innerHTML = (likedVideos[index]?"â¤ï¸":"ğŸ¤") + "<br><small>"+formatNumber(videos[index].likes)+"</small>";
});

// Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
document.getElementById("commentBtn").onclick = ()=>alert("Ù…Ø¹Ù„Ù‚ Ø­Ø§Ù„ÙŠÙ‹Ø§");

// Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
shareBtn.onclick = ()=>{shareOptions.style.display = shareOptions.style.display==="flex"?"none":"flex";}
downloadBtn.onclick = ()=>{
  const a=document.createElement("a");
  a.href=videoPlayer.src;
  a.download="TIKNEGM.mp4";
  a.click();
};
copyBtn.onclick = ()=>{
  navigator.clipboard.writeText(window.location.href).then(()=>alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!"));
};
shareAppBtn.onclick = ()=>{
  const siteLink = window.location.href;
  const siteLogo = "file_00000000658c722fa7584f1933ac55ff.png";
  const siteDesc = "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ TIK NEGM! Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ù…Ø´Ø§Ù‡Ø¯Ø© Ø£ÙØ¶Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù‚ØµÙŠØ±Ø© ÙˆØ§Ù„Ù…Ø³Ù„ÙŠØ©ØŒ ÙˆÙ„Ø§ ØªÙ†Ø³ Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªÙƒ ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡Ø§ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ. ÙƒÙ„ ÙÙŠØ¯ÙŠÙˆ Ù„Ø¯ÙŠÙ‡ Ù…Ù„Ø§ÙŠÙŠÙ† Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª ÙˆØ§Ù„Ù„Ø§ÙŠÙƒØ§Øª!";
  const choice = prompt("Ø§Ø®ØªØ± ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©:\n1ï¸âƒ£ ÙˆØ§ØªØ³Ø§Ø¨\n2ï¸âƒ£ Ø¥Ù†Ø³ØªÙ‚Ø±Ø§Ù…\nØ§ÙƒØªØ¨ 1 Ø£Ùˆ 2:");
  if(choice==="1"){
    const waText = encodeURIComponent(`${siteDesc}\n\nØ±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${siteLink}`);
    window.open(`https://api.whatsapp.com/send?text=${waText}`,"_blank");
  } else if(choice==="2"){
    alert("Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ§Ù„ØµÙ‚ ÙÙŠ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù… Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹:\n"+siteLink);
  } else { alert("Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØªØ·Ø¨ÙŠÙ‚!"); }
};

// ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
function openProfile(){
  videoPlayer.pause();
  app.style.display="none";
  profileContainer.style.display="block";
  profileVideosContainer.innerHTML="";
  videos.forEach((v,i)=>{
    const vid=document.createElement("video");
    vid.src=v.src; vid.muted=true; vid.loop=true;
    vid.onclick=()=>{profileContainer.style.display="none"; app.style.display="block"; index=i; loadVideo();};
    profileVideosContainer.appendChild(vid);
  });
}

profilePic.onclick=openProfile;
closeProfileBtn.onclick=()=>{profileContainer.style.display="none"; app.style.display="block";}

// Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ø¬Ø¯ÙŠØ¯
addVideoBtn.onclick=()=>{
  const input=document.createElement("input");
  input.type="file"; input.accept="video/*";
  input.onchange=e=>{
    const file = e.target.files[0];
    if(file){
      const url = URL.createObjectURL(file);
      videos.push({src:url, profile:"914512268067030319.jpeg", desc:"ÙÙŠØ¯ÙŠÙˆ Ø¬Ø¯ÙŠØ¯", likes:0, shares:0, views:0});
      alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ!");
    }
  };
  input.click();
};
</script>

</body>
</html>
